<link rel="stylesheet" type="text/css" href="styles/style.css">

<script>
  // Store id / output pairs in an array
  ids = [
    ["number-oysters", "#num-oysters"],
    ["oyster0", "#treatment-0-sel"],
    ["oyster1", "#treatment-1-sel"],
    ["oyster2", "#treatment-2-sel"],
    ["oyster3", "#treatment-3-sel"],
    ["oyster4", "#treatment-4-sel"],
    ["oyster5", "#treatment-5-sel"],
    ["oyster6", "#treatment-6-sel"],
    ["oyster7", "#treatment-7-sel"]
  ]

  // Grab values from radio buttons
  var grabValues = function(id) {
    // If they are selecting the number of oysters to play for
    if(id === 0) {
      val = $("input[name=" + ids[id][0] + "]:checked").val();
      $(ids[id][1]).html(val)
      console.log(val)
    } 

    // If they are playing for experiment 1
    else if (id === 8) {
      vals = []
      for(var i = 1; i < 9; i++) {
        val = $("input[name=" + ids[i][0] + "]:checked").val()
        vals.push(val); 
        $(ids[i][1]).html(val)
      }
      console.log(vals);
    }

    else if (id === 6) {
      vals = []
      for(var i = 1; i < 7; i++) {
        val = $("input[name=" + ids[i][0] + "]:checked").val()
        vals.push(val); 
        $(ids[i][1]).html(val)
      }
      console.log(vals);
    }
  }
</script>

<script>
  var grabCook = function() {
    val = $("input[name=cooked-type]:checked").val();
    $("#cooked-option").html(val)
  }
</script>
<div class="page-wrapper">
  <section class="warning"></section>

  <!-- Show the instructions for the experiment -->
  <section class="instructions hidden">
    <h3>Instructions:</h3>

    <p><em>Please read these instructions carefully and do not communicate with any one during the experiment. Ask a facilitator if you have a question and remember that your participation is voluntary.</em></p>

    <ul>
      <li><strong>We will give you $10 that you may keep and/or use to purchase oysters.</strong> You may think of this money as a bank account from which you can withdrawal money.</li>
      <li>Depending on the choices you select during the experiment, you may receive oysters and cash; cash only; oysters only; or oysters and you owe money at the end of the experiment.</li>
    </ul>

    <br>

    <h3>Rules:</h3>

    <ol>
      <li>Decide how many oysters you want to play for (3, 6, 9 or 12)</li>
      <li>Decide if you want to buy the oyster options at the random price by selecting “Yes” or “No”</li>
      <li>Roll a die to determine which oyster option will be implemented</li>
      <li>Fill out a short survey</li>
    </ol>

    <br>

    <ul><li>You may consume the oysters (a) raw on the half shell, (b) raw in a shot glass, fried as a 'po-boy' sandwich, or take them home in a bag.</li></ul>

    <p><strong>Example 1:</strong> If you selected 'Yes' for an oyster bundle that cost $7 and this decision was implemented, you will receive the oysters and $3 cash ($10 - $7 = $3).</p>

    <p><strong>Example 2:</strong> If you selected 'No' for an oyster bundle and this decision was implemented, you will receive $10 and will not receive any oysters.</p>

    <p><strong>Example 1:</strong> If you selected 'Yes' for an oyster bundle that cost $15 and this decision was implemented, you will receive the oysters and owe $5 cash ($10 - $15 = -$5).</p>
    <div class="button">
      <button type="button" id="continue">Continue</button>
    </div>
  </section>

  <!-- Selection screen asking how many oysters they want -->
  <section class="number-selection hidden">
    <p>How many oysters would you like to play for?</p>
    <form>
      <input type="radio" name="number-oysters" value="3"> 3
      <br>
      <input type="radio" name="number-oysters" value="6"> 6
      <br>
      <input type="radio" name="number-oysters" value="9"> 9
      <br>
      <input type="radio" name="number-oysters" value="12"> 12
    </form>
    <p class="note">Note: If you play for more than 3 oysters, there is a chance that you
    spend more money than you have in your account. In this case you have to
    cover the remaining costs.</p>
    <div class="button">
      <button type="button" id="continue" onclick="grabValues(0)">Continue</button>
    </div>
  </section>

  <!-- Oyster selection screen, which ones are they going to buy -->
  <section class="oyster-selection hidden">
    <div class="selection-intro">
      <p class="treatment-instructions"></p>
      <h3><u><strong>Your Decisions</strong></u></h3>
      <p class="hidden" id="noaa-instructions">The following options are based on the latest available information from the United States National Oceanic and Atmospheric Administration (NOAA). Please make your choices.</p>
      <p>You selected to make choices for <strong id="number-of-oysters"></strong> oysters. Please make your choices by selecting ‘YES' or ‘NO' for the following options. Remember these are the actual prices you will pay.</p>
    </div>
    <br>
    <hr>
    <br>
    <div class="oyster-list">
      <div id="treatment-0"></div>
      <br><hr><br>
      <div id="treatment-1"></div>
      <br><hr><br>
      <div id="treatment-2"></div>
      <br><hr><br>
      <div id="treatment-3"></div>
      <br><hr><br>
      <div id="treatment-4"></div>
      <br><hr><br>
      <div id="treatment-5"></div>
      <br><hr><br>
      <div id="extra-treatments">
        <div id="treatment-6"></div>
        <br><hr><br>
        <div id="treatment-7"></div>
        <br><hr><br>
      </div>
    </div>
    <div class="warning"></div>
    <div class="button">
      <button type="button" id="continue" onclick="grabValues(8)">Submit</button>
    </div>
  </section>

  <!-- Survey of questions -->
  <section class="survey hidden">
    <ol>
      <li>What is your age?
        <input type="text" id="age">
      </li>
      <li>Are you male or female?
        <div class="radio-item">
          <input type="radio" name="gender" id="male" value="male">
          <label>Male</label>
        </div>
        <div class="radio-itme">
          <input type="radio" name="gender" id="female" value="female">
          <label>Female</label>
        </div>
      </li>

      <li>How often do you consume oysters?
        <div class="radio-item">
          <input type="radio" name="amtoysters" value="0">
          <label>0 times per year</label>
        </div>
        <div class="radio-item">
          <input type="radio" name="amtoysters" value="1-2">
          <label>1-2 times per year</label>
        </div>
        <div class="radio-item">
          <input type="radio" name="amtoysters" value="3-5">
          <label>3-5 times per year</label>
        </div>
        <div class="radio-item">
          <input type="radio" name="amtoysters" value="6-9">
          <label>6-9 times per year</label>
        </div>
        <div class="radio-item">
          <input type="radio" name="amtoysters" value=">9">
          <label>>9 times per year</label>
        </div>
      </li>

      <li>Are you the primary shopper in your household?
        <div class="radio-item">
          <input type="radio" name="primshop" value="yes">
          <label>Yes</label>
        </div>
        <div class="radio-item">
          <input type="radio" name="primshop" value="no">
          <label>No</label>
        </div>
      </li>

      <li>What is your profession?
        <div class="radio-item">
          <input type="radio" name="profession" value="government">
          <label>Government</label>
        </div>
        <div class="radio-item">
          <input type="radio" name="profession" value="Academia">
          <label>Academia</label>
        </div>
        <div class="radio-item">
          <input type="radio" name="profession" value="Business">
          <label>Business</label>
        </div>
        <div class="radio-item">
          <input type="radio" name="profession" value="Agriculture">
          <label>Agriculture</label>
        </div>
        <div class="radio-item">
          <input type="radio" name="profession" value="Other">
          <label>Other (please specify) </label>
          <input type="text" name="otherprofession">
        </div>
      </li>

      <li>Are you:
        <div class="radio-item">
          <input type="radio" name="pplitical" value="liberal">
          <label>Politically liberal</label>
        </div>
        <div class="radio-item">
          <input type="radio" name="pplitical" value="moderate">
          <label>Politically moderate</label>
        </div>
        <div class="radio-item">
          <input type="radio" name="pplitical" value="conservative">
          <label>Politically conservative</label>
        </div>
        <div class="radio-item">
          <input type="radio" name="pplitical" value="other">
          <label>Other (please specify)</label>
          <input type="text" name="otherpolitical">
        </div>
      </li>

      <li>Which category best describes your <u>household</u> income (before taxes) in 2014?
        <div class="radio-item">
          <input type="radio" name="income" value="les">
          <label>Politically liberal</label>
        </div>
      </li>
      <li>What is the highest degree or level of school that you have comopleted? <em>(Select one</em></li>
      <li>How often do you go to the beach each year, on average?</li>
      <li>Are you a first time oyster consumer?</li>
      <li>In a typical month, approximately how often do you eat seafood?</li>
      <li>In a typical month, approximately how often do you eat at restaurants?</li>
      <li>When you eat at a restaurant, what is the percentage of seafood versus other food?</li>
      <li>How often do you eat seafood at home versus a restaurant?</li>
      <li>Are you the primary seafood shopper in your household?</li>
      <li>How often do you catch your own seafood?</li>
      <li>How important is location in your oyster choice?</li>
      <li>For oysters from the Delaware Bay, I would...</li>
      <li>For oysters from the Delaware Inland Bays, I would...</li>
      <li>How do you usually prefer the preparation of your oysters?</li>
      <li>How important are the following oyster characteristics to you?</li>
    </ol>
    <div class="warning">
    </div>
    <div class="button">
      <button type="button" id="submitSurvey">Finish and Submit</button>
    </div>
  </section>

  <!-- Let them choose which way they want to consume their oysters -->
  <section class="consumption-selection hidden">
    <p>How would you like your oysters cooked?</p>
    <div class="radio-item">
      <input type="radio" name="cooked-type" value="Raw on the half shell">
      <label>Raw on the half shell</label>
    </div>
    <div class="radio-item">
      <input type="radio" name="cooked-type" value="In a shot glass with condiments">
      <label>In a shot glass with condiments</label>
    </div>
    <div class="radio-item">
      <input type="radio" name="cooked-type" value="Fried on a roll">
      <label>Fried on a roll</label>
    </div>
    <div class="radio-item">
      <input type="radio" name="cooked-type" value="In a bag with ice">
      <label>In a bag with ice</label>
    </div>
    <div class="button">
      <button type="button" id="continue" onclick="grabCook()">Continue</button>
    </div>
  </section>

  <!-- Option selection screen -->
  <section class="dice-roll hidden">
    <p>You will now roll a die to determine which treatment of oysters you will
    be offered...</p>
    <h2 id="dice-number" value="1">1</h2>
    <button type="button" id="dice-button" value="start">Roll the Dice</button>
  </section>


  <!-- Final screen, shows final results -->
  <section class="thank-you hidden">
    <p>Thank you for participating! Please return this tablet.</p>
    <p>Option <span id="option-choice"></span> was randomly selected, the option information is below.</p>
    <div id="final-selection"></div>
  </section>

  <!-- Cleverly hide the subject's choices in hidden text areas -->
  <textarea class="hidden" id="num-oysters">-1</textarea>
  <textarea class="hidden" id="treatment-0-sel">-1</textarea>
  <textarea class="hidden" id="treatment-1-sel">-1</textarea>
  <textarea class="hidden" id="treatment-2-sel">-1</textarea>
  <textarea class="hidden" id="treatment-3-sel">-1</textarea>
  <textarea class="hidden" id="treatment-4-sel">-1</textarea>
  <textarea class="hidden" id="treatment-5-sel">-1</textarea>
  <textarea class="hidden" id="treatment-6-sel">-1</textarea>
  <textarea class="hidden" id="treatment-7-sel">-1</textarea>
  <textarea class="hidden" id="cooked-option">-1</textarea>
  <textarea class="hidden" id="final-option"></textarea>
</div>
